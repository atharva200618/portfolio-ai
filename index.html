<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="description" content="Atharva - Data Analyst & AI/ML Student Portfolio. View projects in Python, SQL, Power BI, and Machine Learning.">
<meta name="keywords" content="Data Analyst, Portfolio, Python, Power BI, VIT Vellore, Machine Learning, SQL">
<meta name="author" content="Atharva Upadhyay">
<!-- Open Graph / SEO -->
<meta property="og:title" content="Atharva | Data Analyst Portfolio">
<meta property="og:description" content="Turning Data Into Intelligence. A showcase of predictive models and dashboards.">
<meta property="og:type" content="website">
<title>Atharva | Data Analyst Portfolio</title>
<!-- Premium Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Syne:wght@400;600;700;800&display=swap" rel="stylesheet">
<!-- Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<!-- MARKED.JS LIBRARY -->
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<style>
/*
==========================================================================
1. CSS VARIABLES & RESET
==========================================================================
*/
:root {
/* Theme Colors */
--bg-deep: #050507;
--bg-card: rgba(20, 20, 25, 0.6);
--text-main: #ffffff;
--text-muted: #a0a0a0;
--accent-glow: #00ff9d;
--accent-dark: #00cc7d;
/* Glassmorphism */
--glass-bg: rgba(255, 255, 255, 0.03);
--glass-border: rgba(255, 255, 255, 0.08);
--glass-highlight: rgba(255, 255, 255, 0.15);
--glass-blur: 20px;
/* Typography */
--font-display: 'Syne', sans-serif;
--font-body: 'Inter', sans-serif;
/* Layout */
--nav-height: 70px;
--z-cursor: 9999;
--z-modal: 6000;
--z-blog: 5000;
--z-nav: 1000;
--z-content: 1;
}

/* --- RESET --- */
* { margin: 0; padding: 0; box-sizing: border-box; cursor: none; -webkit-tap-highlight-color: transparent; }
html { scroll-behavior: smooth; font-size: 16px; -webkit-overflow-scrolling: touch; }
body {
background-color: var(--bg-deep);
color: var(--text-main);
font-family: var(--font-body);
overflow-x: hidden;
-webkit-font-smoothing: antialiased;
-moz-osx-font-smoothing: grayscale;
line-height: 1.6;
}

:focus-visible { outline: 2px solid var(--accent-glow); outline-offset: 4px; }

/* --- UTILITIES --- */
.container { max-width: 1400px; margin: 0 auto; padding: 0 20px; position: relative; z-index: var(--z-content); width: 100%; }
h1, h2, h3, h4, h5, h6 { font-family: var(--font-display); line-height: 1.1; overflow-wrap: break-word; }
.gradient-text {
background: linear-gradient(135deg, #fff 0%, var(--accent-glow) 100%);
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
display: inline-block;
}
.sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); border: 0; }
.sr-only-focusable:focus { width: auto; height: auto; overflow: visible; clip: auto; white-space: normal; }

/*
==========================================================================
2. COMPONENTS
==========================================================================
*/
/* --- GRAIN OVERLAY --- */
.grain {
position: fixed; top: 0; left: 0; width: 100%; height: 100%;
background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.04'/%3E%3C/svg%3E");
pointer-events: none; z-index: var(--z-content); opacity: 0.4;
}

/* --- SCROLL PROGRESS BAR --- */
.scroll-progress {
    position: fixed; top: 0; left: 0; height: 3px; background: var(--accent-glow);
    width: 0%; z-index: 10001; transition: width 0.1s linear;
    box-shadow: 0 0 10px var(--accent-glow);
}

/* --- CUSTOM CURSOR --- */
.cursor { position: fixed; top: 0; left: 0; width: 20px; height: 20px; border: 1px solid rgba(255, 255, 255, 0.5); border-radius: 50%; pointer-events: none; z-index: var(--z-cursor); transform: translate(-50%, -50%); transition: width 0.3s, height 0.3s, background 0.3s, border-color 0.3s; mix-blend-mode: difference; display: none; }
.cursor-dot { position: fixed; top: 0; left: 0; width: 4px; height: 4px; background: var(--accent-glow); border-radius: 50%; pointer-events: none; z-index: var(--z-cursor); transform: translate(-50%, -50%); display: none; }
.cursor.hovered { width: 50px; height: 50px; background: rgba(0, 255, 157, 0.15); border-color: var(--accent-glow); backdrop-filter: blur(2px); }
.cursor.cursor-terminal { width: 20px; height: 24px; border: none; background: rgba(0, 255, 157, 0.5); border-radius: 2px; transform: translate(-50%, -50%); }

/* --- NAVIGATION --- */
header { position: fixed; top: 10px; left: 0; width: 100%; z-index: var(--z-nav); display: flex; justify-content: center; }
nav {
background: rgba(10, 10, 12, 0.9); backdrop-filter: blur(20px);
-webkit-backdrop-filter: blur(20px); padding: 12px 30px; border-radius: 100px;
border: 1px solid var(--glass-border); box-shadow: 0 15px 40px rgba(0,0,0,0.4);
display: flex; gap: 30px; align-items: center; transition: all 0.4s ease; width: auto; max-width: 95%;
}
.nav-link { text-decoration: none; color: var(--text-muted); font-size: 0.9rem; font-weight: 500; letter-spacing: 0.02em; transition: 0.3s; position: relative; white-space: nowrap; padding: 5px 0; }
.nav-link:hover, .nav-link.active { color: var(--text-main); text-shadow: 0 0 8px rgba(255,255,255,0.3); }
.nav-link.active { color: var(--accent-glow); text-shadow: 0 0 15px rgba(0, 255, 157, 0.4); }
.nav-link.active::after { width: 100%; }
.nav-link::after { content: ''; position: absolute; bottom: -4px; left: 50%; transform: translateX(-50%); width: 0; height: 2px; background: var(--accent-glow); transition: width 0.3s ease; }
.menu-toggle { display: none; color: #fff; font-size: 1.4rem; z-index: 1002; background: none; border: none; padding: 8px; }

/* --- BUTTONS --- */
.magnetic-btn {
padding: 16px 36px; border-radius: 100px; background: rgba(255,255,255,0.05); color: #fff; font-weight: 600; font-family: var(--font-body);
text-decoration: none; position: relative; overflow: hidden; border: 1px solid var(--glass-border);
transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94); display: inline-flex; align-items: center; justify-content: center; gap: 10px; z-index: 1;
}
.magnetic-btn::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(110deg, transparent, rgba(0,255,157,0.1), transparent); transform: translateX(-100%); transition: transform 0.6s; }
.magnetic-btn:hover::before { transform: translateX(100%); }
.magnetic-btn:hover { border-color: var(--accent-glow); background: rgba(255,255,255,0.08); box-shadow: 0 0 25px rgba(0,255,157,0.15); }
.btn-small {
padding: 10px 24px; font-size: 0.85rem; border-radius: 50px; background: rgba(255,255,255,0.05); color: #fff; text-decoration: none;
border: 1px solid var(--glass-border); transition: 0.3s; display: inline-flex; align-items: center; gap: 8px; touch-action: manipulation;
}
.btn-small:hover { background: var(--accent-glow); color: #050507; border-color: var(--accent-glow); transform: translateY(-2px); }

/* --- CARDS & GLASS --- */
.glass-card {
background: var(--glass-bg); backdrop-filter: blur(var(--glass-blur)); -webkit-backdrop-filter: blur(var(--glass-blur));
border: 1px solid var(--glass-border); border-top: 1px solid var(--glass-highlight); border-left: 1px solid var(--glass-highlight);
padding: 40px; border-radius: 20px; transition: transform 0.5s, box-shadow 0.3s, border-color 0.3s; position: relative; overflow: hidden; transform-style: preserve-3d;
}
.glass-card:hover { border-color: rgba(255, 255, 255, 0.2); background: rgba(255,255,255,0.05); transform: translateY(-5px); box-shadow: 0 20px 40px rgba(0,0,0,0.4); }
.glass-card::after { content: ''; position: absolute; top: 0; right: 0; width: 20px; height: 20px; border-top: 2px solid var(--accent-glow); border-right: 2px solid var(--accent-glow); opacity: 0; transition: opacity 0.3s; border-top-right-radius: 20px; }
.glass-card:hover::after { opacity: 1; }

/*
==========================================================================
3. HERO SECTION
==========================================================================
*/
.hero { min-height: 100vh; display: flex; align-items: center; position: relative; padding-top: var(--nav-height); padding-bottom: 60px; overflow: hidden; }
.hero-intro { text-align: center; margin-bottom: 40px; opacity: 0; animation: fadeInUp 1s cubic-bezier(0.2, 0.8, 0.2, 1) forwards 0.3s; }
.intro-label { display: inline-block; padding: 6px 16px; border: 1px solid rgba(0, 255, 157, 0.3); border-radius: 50px; font-size: 0.75rem; color: var(--accent-glow); margin-bottom: 15px; background: rgba(0, 255, 157, 0.05); backdrop-filter: blur(5px); letter-spacing: 1px; text-transform: uppercase; font-weight: 500; }
.intro-name { font-size: clamp(2rem, 8vw, 4rem); font-weight: 800; letter-spacing: -0.02em; margin-bottom: 10px; line-height: 1.1; }
.intro-role { font-size: clamp(0.9rem, 3vw, 1.3rem); color: var(--text-main); margin-bottom: 8px; font-weight: 500; }
.intro-tagline { font-size: clamp(0.85rem, 2.5vw, 1.1rem); color: var(--text-muted); margin-bottom: 25px; max-width: 600px; margin-left: auto; margin-right: auto; line-height: 1.5; padding: 0 10px; }
.intro-buttons { display: flex; gap: 15px; justify-content: center; flex-wrap: wrap; }

.hero-grid { display: grid; grid-template-columns: 1.5fr 1fr; gap: 30px; width: 100%; align-items: center; height: auto; margin-top: 20px; }

/* --- Chat Window --- */
.chat-wrapper { width: 100%; height: 100%; perspective: 1000px; }
.chat-window {
background: rgba(10, 10, 12, 0.85); backdrop-filter: blur(25px); -webkit-backdrop-filter: blur(25px);
border: 1px solid rgba(0, 255, 157, 0.15); border-radius: 16px; height: 550px;
display: flex; flex-direction: column; box-shadow: 0 20px 50px rgba(0,0,0,0.3); position: relative; overflow: hidden; transition: transform 0.1s;
}
.chat-header { padding: 12px 20px; border-bottom: 1px solid rgba(255, 255, 255, 0.08); display: flex; justify-content: space-between; align-items: center; background: rgba(0, 0, 0, 0.2); flex-shrink: 0; }
.chat-title { font-family: 'Syne', sans-serif; font-size: 0.9rem; color: var(--text-main); display: flex; align-items: center; gap: 8px; }
.status-dot { width: 6px; height: 6px; background: var(--accent-glow); border-radius: 50%; box-shadow: 0 0 10px var(--accent-glow); animation: pulse 2s infinite; }
.window-controls { display: flex; gap: 6px; }
.control-dot { width: 10px; height: 10px; border-radius: 50%; background: rgba(255,255,255,0.1); transition: 0.3s; cursor: pointer; }
.control-dot.close { background: #ff5f56; } .control-dot.min { background: #ffbd2e; } .control-dot.max { background: #27c93f; }

.chat-body { flex: 1; padding: 15px; overflow-y: auto; scrollbar-width: thin; scrollbar-color: var(--accent-glow) transparent; display: flex; flex-direction: column; gap: 12px; }
.chat-body::-webkit-scrollbar { width: 4px; } .chat-body::-webkit-scrollbar-track { background: transparent; } .chat-body::-webkit-scrollbar-thumb { background: rgba(0, 255, 157, 0.2); border-radius: 2px; }

.message-bubble {
background: rgba(0, 255, 157, 0.03); border-left: 3px solid var(--accent-glow); padding: 10px 14px;
border-radius: 8px; max-width: 90%; animation: slideInLeft 0.4s; color: #ddd; font-size: 0.9rem; line-height: 1.6; position: relative; word-wrap: break-word;
white-space: pre-wrap; 
}
.message-bubble.user {
align-self: flex-end; background: rgba(255, 255, 255, 0.05); border-left: none; border-right: 3px solid rgba(255, 255, 255, 0.3);
animation: slideInRight 0.4s;
}

/* --- ENHANCED STATES --- */
.message-bubble.thinking {
    font-style: italic;
    color: rgba(255, 255, 255, 0.6);
    background: rgba(0, 255, 157, 0.02);
    border-left-color: rgba(0, 255, 157, 0.3);
}
@keyframes dots {
    0%, 20% { content: '.'; }
    40% { content: '..'; }
    60%, 100% { content: '...'; }
}

.message-bubble.error {
    background: rgba(255, 95, 86, 0.1);
    border-left-color: #ff5f56;
    color: #ffcccc;
}
.retry-btn {
    display: inline-block;
    margin-top: 8px;
    padding: 4px 10px;
    font-size: 0.75rem;
    background: rgba(255,255,255,0.1);
    border: 1px solid rgba(255,255,255,0.2);
    color: #fff;
    border-radius: 4px;
    cursor: pointer;
    transition: 0.2s;
}
.retry-btn:hover { background: #ff5f56; border-color: #ff5f56; }

/* --- MARKDOWN STYLING INSIDE CHAT --- */
.message-bubble p { margin-bottom: 10px; }
.message-bubble p:last-child { margin-bottom: 0; }
.message-bubble strong { color: var(--accent-glow); font-weight: 600; }
.message-bubble h3, .message-bubble h4 { color: #fff; margin-top: 10px; margin-bottom: 5px; }
.message-bubble ul, .message-bubble ol { padding-left: 20px; margin-bottom: 10px; margin-top: 5px; }
.message-bubble li { margin-bottom: 4px; list-style-type: disc; }
.message-bubble code { background: rgba(0,0,0,0.3); padding: 2px 5px; border-radius: 4px; font-family: monospace; font-size: 0.85em; color: #ff9d00; }

.chat-footer { padding: 12px; background: rgba(0,0,0,0.2); border-top: 1px solid rgba(255,255,255,0.05); position: relative; flex-shrink: 0; }
.command-input-wrapper { position: relative; width: 100%; display: flex; align-items: center; }
.command-prompt { color: var(--accent-glow); font-family: 'Courier New', monospace; font-weight: bold; margin-right: 8px; user-select: none; flex-shrink: 0; }
.command-input {
width: 100%; background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(0, 255, 157, 0.2);
color: var(--text-main); font-family: 'Courier New', monospace; padding: 10px; border-radius: 6px; outline: none; transition: all 0.3s; font-size: 16px;
}
.command-input::placeholder { color: rgba(255,255,255,0.2); font-size: 14px; }
.command-input:focus { border-color: var(--accent-glow); box-shadow: 0 0 20px rgba(0, 255, 157, 0.15); background: rgba(0, 255, 157, 0.02); }

.suggestions-box {
position: absolute; bottom: 100%; left: 0; width: 100%; background: rgba(10, 10, 12, 0.95);
border: 1px solid var(--glass-border); border-bottom: none; border-radius: 8px 8px 0 0; max-height: 150px; overflow-y: auto; display: none; z-index: 10;
}
.suggestion-item { padding: 8px 12px; cursor: pointer; color: #ccc; font-family: 'Courier New', monospace; font-size: 0.85rem; transition: 0.2s; }
.suggestion-item:hover, .suggestion-item.active { background: rgba(0, 255, 157, 0.1); color: var(--accent-glow); }

/* --- ADDED: VOICE UI STYLES --- */
.voice-controls-wrapper {
    position: absolute;
    right: 12px;
    top: 12px;
    display: flex;
    align-items: center;
    z-index: 20;
}

.voice-btn {
    background: rgba(255,255,255,0.05);
    border: 1px solid var(--glass-border);
    color: var(--text-muted);
    width: 36px;
    height: 36px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    cursor: pointer;
}

.voice-btn:hover {
    color: var(--accent-glow);
    border-color: var(--accent-glow);
    background: rgba(0, 255, 157, 0.1);
}

/* Active: Listening State */
.voice-btn.listening {
    color: #ff5f56;
    border-color: #ff5f56;
    animation: pulse-mic 1.5s infinite;
    background: rgba(255, 95, 86, 0.1);
}

/* Active: Speaking State */
.voice-btn.speaking {
    color: var(--accent-glow);
    border-color: var(--accent-glow);
    animation: wave-mic 1s infinite;
}

@keyframes pulse-mic {
    0% { box-shadow: 0 0 0 0 rgba(255, 95, 86, 0.4); }
    70% { box-shadow: 0 0 0 10px rgba(255, 95, 86, 0); }
    100% { box-shadow: 0 0 0 0 rgba(255, 95, 86, 0); }
}

@keyframes wave-mic {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); }
}

/* Voice Settings Dropdown */
.voice-settings-dropdown {
    position: absolute;
    bottom: 50px;
    right: 0;
    background: rgba(10, 10, 12, 0.95);
    border: 1px solid var(--glass-border);
    border-radius: 8px;
    padding: 10px;
    width: 150px;
    backdrop-filter: blur(10px);
    z-index: 30;
    display: flex;
    flex-direction: column;
    gap: 10px;
    box-shadow: 0 5px 20px rgba(0,0,0,0.5);
}

.voice-setting-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    color: var(--text-muted);
    font-size: 0.8rem;
}

.voice-setting-row label {
    margin-right: 8px;
}

.voice-setting-row input[type="range"] {
    width: 60px;
    accent-color: var(--accent-glow);
}

/* --- Neural Network --- */
.neural-container { width: 100%; height: 550px; position: relative; border-radius: 20px; overflow: hidden; background: radial-gradient(circle at center, rgba(0,255,157,0.03) 0%, transparent 70%); }
#neural-canvas { width: 100%; height: 100%; display: block; }

/* --- Background Effects --- */
.scan-line { position: fixed; width: 100%; height: 2px; background: linear-gradient(90deg, transparent, var(--accent-glow), transparent); box-shadow: 0 0 10px var(--accent-glow); animation: scan 8s linear infinite; pointer-events: none; z-index: 9999; opacity: 0.5; }
@keyframes scan { from { top: -10%; } to { top: 110%; } }
.floating-code { position: fixed; color: rgba(255, 255, 255, 0.03); font-family: 'Courier New', monospace; font-size: 12px; pointer-events: none; z-index: 0; white-space: nowrap; user-select: none; }
.matrix-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: black; z-index: 9998; opacity: 0; transition: opacity 1s ease; pointer-events: none; }
.matrix-overlay.active { opacity: 0.8; pointer-events: all; }

/* Keyframes */
@keyframes slideInLeft { from { opacity: 0; transform: translateX(-20px); } to { opacity: 1; transform: translateX(0); } }
@keyframes slideInRight { from { opacity: 0; transform: translateX(20px); } to { opacity: 1; transform: translateX(0); } }
@keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
@keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(0, 255, 157, 0.7); } 70% { box-shadow: 0 0 0 10px rgba(0, 255, 157, 0); } 100% { box-shadow: 0 0 0 0 rgba(0, 255, 157, 0); } }

/*
==========================================================================
4. OTHER SECTIONS
==========================================================================
*/
.about-section { padding: 80px 0; text-align: center; }
.about-card { max-width: 800px; margin: 0 auto; }
.about-card h2 { font-size: 2rem; margin-bottom: 15px; }
.about-card p { color: var(--text-muted); font-size: 1rem; text-align: left; }

.skills-section { padding: 40px 0; }
.skills-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
.skill-group h4 { color: var(--accent-glow); margin-bottom: 12px; font-size: 1.2rem; display: flex; align-items: center; gap: 8px; }
.skill-tags { display: flex; flex-wrap: wrap; gap: 10px; }
.skill-tag { background: rgba(255,255,255,0.03); border: 1px solid var(--glass-border); padding: 6px 14px; border-radius: 6px; font-size: 0.85rem; color: #ddd; transition: 0.3s; }
.skill-tag:hover { border-color: var(--accent-glow); color: var(--accent-glow); background: rgba(0,255,157,0.05); }

.marquee-section { padding: 40px 0; overflow: hidden; border-top: 1px solid var(--glass-border); border-bottom: 1px solid var(--glass-border); background: linear-gradient(90deg, rgba(0,0,0,0), rgba(0,0,0,0.5), rgba(0,0,0,0)); position: relative; z-index: 2; }
.marquee-content { display: flex; gap: 50px; animation: scroll 40s linear infinite; width: max-content; }
.marquee-item { font-family: var(--font-display); font-size: 2.5rem; font-weight: 700; color: rgba(255,255,255,0.04); -webkit-text-stroke: 1px rgba(255,255,255,0.1); transition: 0.3s; white-space: nowrap; }
.marquee-item:hover { color: var(--accent-glow); -webkit-text-stroke: 0; text-shadow: 0 0 20px rgba(0,255,157,0.4); }
@keyframes scroll { from { transform: translateX(0); } to { transform: translateX(-50%); } }

.section-header { display: flex; justify-content: space-between; align-items: flex-end; margin-bottom: 40px; margin-top: 80px; flex-wrap: wrap; gap: 20px; }
.section-num { font-family: var(--font-display); font-size: 3rem; color: rgba(255,255,255,0.03); line-height: 1; font-weight: 800; }
.section-title { font-size: 2rem; font-weight: 700; }

.work-grid { display: grid; grid-template-columns: repeat(12, 1fr); gap: 20px; }
.work-card { grid-column: span 6; min-height: auto; display: flex; flex-direction: column; justify-content: space-between; }
.work-card:hover { transform: translateY(-5px); box-shadow: 0 20px 40px rgba(0,0,0,0.4); }
.card-bg-img { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: radial-gradient(circle at top right, var(--accent-glow), transparent); opacity: 0; transition: 0.6s; pointer-events: none; }
.work-card:hover .card-bg-img { opacity: 0.05; }
.card-icon { font-size: 1.5rem; color: var(--accent-glow); margin-bottom: 15px; filter: drop-shadow(0 0 5px rgba(0,255,157,0.3)); }
.work-card h3 { font-size: 1.5rem; margin-bottom: 10px; line-height: 1.2; }
.project-stats { margin: 10px 0; color: #ccc; font-size: 0.85rem; }
.project-stats li { list-style: none; margin-bottom: 6px; padding-left: 15px; position: relative; }
.project-stats li::before { content: '▹'; color: var(--accent-glow); position: absolute; left: 0; font-size: 1rem; }
.project-actions { margin-top: 20px; display: flex; gap: 10px; flex-wrap: wrap; }
.work-card.full { grid-column: span 12; flex-direction: column; align-items: flex-start; text-align: left; }
.work-card.full h3 { font-size: 1.8rem; }

.footer-area { padding: 80px 0 40px 0; text-align: center; }
.contact-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 20px; margin-top: 40px; }
.contact-card { display: flex; flex-direction: column; align-items: center; text-align: center; padding: 25px; transition: 0.4s; text-decoration: none; color: inherit; }
.contact-card:hover { transform: translateY(-5px); border-color: var(--accent-glow); }
.contact-icon { font-size: 1.3rem; color: var(--accent-glow); margin-bottom: 12px; background: rgba(0,255,157,0.08); width: 45px; height: 45px; border-radius: 50%; display: flex; align-items: center; justify-content: center; }
.contact-label { font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1.5px; color: var(--text-muted); margin-bottom: 6px; }
.contact-value { font-size: 1rem; color: #fff; font-weight: 500; transition: 0.3s; }
.internship-cta { color: var(--accent-glow); font-weight: 600; margin-top: 15px; display: inline-block; padding: 6px 14px; background: rgba(0,255,157,0.05); border-radius: 6px; font-size: 0.85rem; }
.footer-bottom { margin-top: 60px; padding-top: 20px; border-top: 1px solid var(--glass-border); color: var(--text-muted); font-size: 0.8rem; }

/*
==========================================================================
5. MODALS & OVERLAYS
==========================================================================
*/
#blog-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: var(--bg-deep); z-index: var(--z-blog); overflow-y: auto; display: none; opacity: 0; transition: opacity 0.5s ease; }
.blog-header { padding: 80px 0 30px 0; text-align: center; position: sticky; top: 0; background: rgba(5,5,7,0.9); backdrop-filter: blur(10px); z-index: 10; border-bottom: 1px solid var(--glass-border); }
.blog-grid { display: grid; grid-template-columns: 1fr; gap: 20px; padding: 40px 0; }
.blog-card { display: flex; flex-direction: column; height: 100%; text-decoration: none; color: inherit; }
.blog-date { font-size: 0.75rem; color: var(--accent-glow); margin-bottom: 8px; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; }
.blog-title { font-size: 1.4rem; margin-bottom: 10px; line-height: 1.3; }
.blog-excerpt { font-size: 0.9rem; color: var(--text-muted); margin-bottom: 20px; flex-grow: 1; line-height: 1.5; }
.read-more { color: #fff; text-decoration: none; font-weight: 600; display: inline-flex; align-items: center; gap: 8px; transition: 0.3s; border: 1px solid var(--glass-border); padding: 10px 20px; border-radius: 50px; background: rgba(255,255,255,0.05); align-self: flex-start; }
.read-more:hover { gap: 15px; color: var(--accent-glow); border-color: var(--accent-glow); }

#article-reader-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(5, 5, 7, 0.98); backdrop-filter: blur(20px); z-index: var(--z-modal); display: none; opacity: 0; transition: opacity 0.4s ease; overflow-y: auto; padding: 20px 10px; }
.article-content-container { max-width: 800px; margin: 60px auto; background: var(--bg-card); border: 1px solid var(--glass-border); border-radius: 16px; padding: 30px; position: relative; box-shadow: 0 0 50px rgba(0,0,0,0.8); }
.article-back-btn { position: absolute; top: 15px; left: 15px; color: var(--text-muted); font-size: 0.8rem; text-decoration: none; display: flex; align-items: center; gap: 8px; transition: 0.3s; z-index: 10; }
#reader-title { font-size: 1.6rem; margin-bottom: 10px; padding-right: 40px; }
#reader-meta { color: var(--accent-glow); margin-bottom: 20px; font-size: 0.9rem; }
#reader-body { font-size: 1rem; line-height: 1.7; color: #ddd; }
#reader-body p { margin-bottom: 15px; }
#reader-body h3 { color: #fff; margin-top: 25px; margin-bottom: 12px; font-size: 1.3rem; }
#reader-body ul { margin-bottom: 15px; padding-left: 20px; color: var(--text-muted); }
#reader-body li { margin-bottom: 8px; }

/*
==========================================================================
6. RESPONSIVE DESIGN
==========================================================================
*/
@media (max-width: 1024px) {
.hero-grid { grid-template-columns: 1fr; height: auto; gap: 20px; }
.chat-window { height: 500px; }
.neural-container { height: 300px; display: none; }
.cursor, .cursor-dot { display: none !important; }
* { cursor: auto !important; }
.menu-toggle { display: block; }
nav { top: 0; left: 0; right: 0; width: 100%; border-radius: 0; padding: 15px 20px; justify-content: space-between; background: rgba(5, 5, 7, 0.98); border-bottom: 1px solid var(--glass-border); }
.nav-links-desktop { display: none; position: absolute; top: 100%; left: 0; width: 100%; flex-direction: column; align-items: center; background: rgba(5,5,7,0.99); border-bottom: 1px solid var(--glass-border); padding: 40px 0; gap: 25px; backdrop-filter: blur(20px); }
.nav-links-desktop.active { display: flex; animation: fadeInDown 0.4s forwards; }
.nav-link { font-size: 1.3rem; }
.work-grid { grid-template-columns: 1fr; }
.work-card { grid-column: span 1 !important; }
.skills-grid { grid-template-columns: 1fr; }
.article-content-container { padding: 20px; margin-top: 40px; }
#reader-title { font-size: 1.5rem; }
}
@media (max-width: 768px) {
.container { padding: 0 15px; }
:root { --nav-height: 60px; }
.hero { padding-top: var(--nav-height); align-items: flex-start; }
.hero-intro { margin-bottom: 30px; margin-top: 20px; }
.intro-label { font-size: 0.7rem; padding: 4px 12px; }
.intro-name { font-size: 2.5rem; }
.intro-tagline { margin-bottom: 20px; }
.intro-buttons { flex-direction: column; width: 100%; }
.intro-buttons .magnetic-btn { width: 100%; padding: 14px 20px; }
.chat-window { height: 450px; border-radius: 12px; }
.chat-header { padding: 10px 15px; }
.chat-body { padding: 12px; }
.message-bubble { font-size: 0.85rem; padding: 8px 12px; }
.window-controls { display: none; }
.section-header { margin-top: 60px; flex-direction: column; align-items: flex-start; gap: 10px; }
.section-title { font-size: 1.8rem; }
.section-num { font-size: 2.5rem; display: none; }
.glass-card { padding: 25px 20px; }
.work-card h3 { font-size: 1.4rem; }
.work-card.full { text-align: left; }
.work-card.full h3 { font-size: 1.6rem; }
.blog-header { padding: 60px 0 20px 0; }
.blog-grid { padding: 20px 0; }
.blog-title { font-size: 1.3rem; }
.blog-excerpt { font-size: 0.9rem; }
}
@media (max-width: 480px) {
.chat-window { height: 60vh; max-height: 400px; }
.intro-name { font-size: 2rem; }
.hero-intro { padding: 0 5px; }
.about-card, .glass-card { padding: 20px 15px; }
.work-card { padding: 20px; }
.contact-grid { grid-template-columns: 1fr; }
.contact-card { padding: 20px; }
}
@keyframes fadeInDown { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
@media (prefers-reduced-motion: reduce) {
* { animation-duration: 0.01ms !important; transition-duration: 0.01ms !important; scroll-behavior: auto !important; }
.marquee-content { animation: none; }
.cursor { display: none !important; }
}

/* --- MOBILE KEYBOARD ADJUSTMENT --- */
@media (max-width: 768px) {
    .command-input {
        font-size: 16px !important; /* Prevents iOS zoom */
    }
    
    /* Dynamic class handled by JS */
    .chat-window.keyboard-open {
        height: 40vh; 
        transform: translateY(0);
        position: fixed;
        bottom: 0;
        z-index: 9999;
        width: 100%;
        border-radius: 12px 12px 0 0;
    }
    .hero.keyboard-active {
        padding-top: 80px;
    }
}
</style>
</head>
<body>
<!-- Scroll Progress Bar -->
<div class="scroll-progress" id="scroll-progress"></div>

<!-- Background Effects -->
<div class="grain"></div>
<div class="scan-line"></div>
<div id="matrix-overlay" class="matrix-overlay"><canvas id="matrix-canvas"></canvas></div>

<!-- Custom Cursor -->
<div class="cursor" id="cursor"></div>
<div class="cursor-dot" id="cursor-dot"></div>

<!-- ================= HEADER & NAV ================= -->
<header>
<nav role="navigation" aria-label="Main Navigation">
<button class="menu-toggle" onclick="toggleMenu()" aria-label="Toggle Navigation Menu" aria-expanded="false"><i class="fas fa-bars"></i></button>
<div class="nav-links-desktop" id="navLinks">
<a href="#about" class="nav-link">About</a>
<a href="#work" class="nav-link">Work</a>
<a href="#blog" onclick="executeCommand('/blog')" class="nav-link">Blog</a>
<a href="#" id="resume-btn" class="nav-link" style="color:var(--accent-glow)">Resume</a>
<a href="#contact" class="nav-link">Contact</a>
</div>
</nav>
</header>

<!-- ================= MAIN CONTENT ================= -->
<main id="main-home">
<section class="hero" aria-label="Introduction">
<div class="container">
<div class="hero-intro">
<div class="intro-label">Welcome to my Portfolio</div>
<h1 class="intro-name">Hi, I'm <span class="gradient-text">Atharva Upadhyay</span></h1>
<p class="intro-role">Data Analyst | AI/ML Student at VIT Vellore</p>
<p class="intro-tagline">Turning Data Into Intelligence</p>
<div class="intro-buttons">
<a href="#work" class="magnetic-btn">View Projects</a>
<a href="#contact" class="magnetic-btn">Contact Me</a>
</div>
</div>

<div class="hero-grid">
<!-- Chat Window -->
<div class="chat-wrapper">
<div class="chat-window" id="tilt-card">
<div class="chat-header">
<div class="chat-title">
<div class="status-dot"></div>
<span>AI Assistant v6.0</span>
</div>
<div class="window-controls">
<div class="control-dot min" title="Minimize"></div>
<div class="control-dot max" title="Maximize"></div>
<div class="control-dot close" title="Close"></div>
</div>
</div>
<div class="chat-body" id="chat-body">
<!-- Messages injected via JS -->
</div>
<div class="chat-footer">
<div class="suggestions-box" id="suggestions"></div>
<div class="command-input-wrapper">
<span class="command-prompt">></span>
<input type="text" class="command-input" id="command-input" placeholder="Ask about projects, skills, or type /help..." autocomplete="off" data-cursor="terminal">
</div>
<!-- ADDED: VOICE CONTROLS -->
<div class="voice-controls-wrapper">
    <button id="mic-btn" class="voice-btn" aria-label="Voice Input" data-cursor="hover">
        <i class="fas fa-microphone"></i>
    </button>
    
    <div id="voice-settings" class="voice-settings-dropdown" style="display:none;">
        <div class="voice-setting-row">
            <label><i class="fas fa-volume-up"></i> Speed</label>
            <input type="range" id="speech-rate" min="0.5" max="2" step="0.1" value="1">
        </div>
        <div class="voice-setting-row">
            <button id="toggle-mute" class="btn-small">Mute Output</button>
        </div>
    </div>
</div>
</div>
</div>
</div>

<!-- Neural Network -->
<div class="neural-container" id="neural-canvas-container">
<canvas id="neural-canvas"></canvas>
</div>
</div>
</div>
</section>

<!-- ABOUT SECTION -->
<section id="about" class="container">
<div class="about-section">
<article class="about-card glass-card" data-cursor="hover">
<div class="card-bg-img" aria-hidden="true"></div>
<h2>About Me</h2>
<p>
I am a second-year BTech CSE (AI & ML) student at VIT Vellore.
I focus on Data Analytics and Machine Learning, with hands-on experience in Python, SQL,
Pandas, and Power BI.
Currently seeking internship opportunities to apply my skills on real-world data problems.
</p>
</article>
</div>
</section>

<!-- SKILLS SECTION -->
<section class="container skills-section">
<div class="skills-grid">
<div class="glass-card" style="padding: 30px;">
<h4><i class="fas fa-layer-group"></i> Core Skills</h4>
<div class="skill-tags">
<div class="skill-tag">Python (Pandas, NumPy)</div>
<div class="skill-tag">SQL (Joins, Window Functions)</div>
<div class="skill-tag">Power BI (DAX, KPI)</div>
<div class="skill-tag">Machine Learning</div>
<div class="skill-tag">Data Visualization</div>
</div>
</div>
<div class="glass-card" style="padding: 30px;">
<h4><i class="fas fa-rocket"></i> Currently Learning</h4>
<div class="skill-tags">
<div class="skill-tag">Advanced ML (Random Forest)</div>
<div class="skill-tag">Statistics</div>
<div class="skill-tag">Tableau</div>
<div class="skill-tag">Git & GitHub</div>
</div>
</div>
</div>
</section>

<!-- MARQUEE -->
<section class="marquee-section" aria-hidden="true">
<div class="marquee-content">
<div class="marquee-item">PYTHON</div>
<div class="marquee-item">SQL</div>
<div class="marquee-item">PANDAS</div>
<div class="marquee-item">POWER BI</div>
<div class="marquee-item">MACHINE LEARNING</div>
<div class="marquee-item">STATISTICS</div>
<div class="marquee-item">TENSORFLOW</div>
<div class="marquee-item">PYTHON</div>
<div class="marquee-item">SQL</div>
<div class="marquee-item">PANDAS</div>
<div class="marquee-item">POWER BI</div>
<div class="marquee-item">MACHINE LEARNING</div>
</div>
</section>

<!-- WORK SECTION -->
<section id="work" class="container">
<div class="section-header">
<div>
<h2 class="section-title">Selected Work</h2>
<p style="color:var(--text-muted)">Measurable impact through data.</p>
</div>
<div class="section-num">03</div>
</div>
<div class="work-grid">
<article class="work-card glass-card" data-cursor="hover">
<div class="card-bg-img" aria-hidden="true"></div>
<div>
<i class="fas fa-database card-icon"></i>
<h3>Student Performance Prediction</h3>
<p style="color:var(--text-muted)">Predicted student academic outcomes to help in early intervention strategies.</p>
<ul class="project-stats">
<li><strong>Dataset:</strong> 10,000+ student records (Kaggle)</li>
<li><strong>Model:</strong> Logistic Regression & Random Forest</li>
<li><strong>Result:</strong> Improved accuracy from 71% <span style="color:var(--accent-glow)">→ 85%</span></li>
</ul>
</div>
<div class="project-actions">
<a href="https://github.com/atharva/student-analytics" target="_blank" class="btn-small"><i class="fab fa-github"></i> View Code</a>
<a href="#" class="btn-small">View Notebook</a>
</div>
</article>
<article class="work-card glass-card" data-cursor="hover">
<div class="card-bg-img" aria-hidden="true"></div>
<div>
<i class="fas fa-chart-pie card-icon"></i>
<h3>Sales Analytics Dashboard</h3>
<p style="color:var(--text-muted)">Comprehensive Power BI dashboard for tracking regional sales performance.</p>
<ul class="project-stats">
<li><strong>Tools:</strong> Power BI, SQL Server, Excel</li>
<li><strong>Features:</strong> Interactive KPI cards, Drill-down reports</li>
<li><strong>Impact:</strong> Optimized query load time by 40%</li>
</ul>
</div>
<div class="project-actions">
<a href="https://github.com/atharva/sales-dashboard" target="_blank" class="btn-small"><i class="fab fa-github"></i> View Code</a>
<a href="#" class="btn-small">View Demo</a>
</div>
</article>
<article class="work-card full glass-card" data-cursor="hover">
<div class="card-bg-img" aria-hidden="true"></div>
<div style="flex:1; padding-right: 20px;">
<i class="fas fa-brain card-icon"></i>
<h3>Customer Churn Prediction</h3>
<p style="color:var(--text-muted)">Identified at-risk customers using ML classification models.</p>
<ul class="project-stats" style="display: inline-block; text-align: left; margin-top: 10px;">
<li><strong>Technique:</strong> XGBoost Classifier</li>
<li><strong>Metrics:</strong> Achieved 82% AUC-ROC Score</li>
</ul>
</div>
<div class="project-actions">
<a href="https://github.com/atharva/churn-prediction" target="_blank" class="btn-small"><i class="fab fa-github"></i> View Code</a>
</div>
</article>
</div>
</section>

<!-- CONTACT SECTION -->
<section id="contact" class="container footer-area">
<div class="section-num" style="display:block; margin-bottom:20px; color:var(--accent-glow);">04</div>
<h2 class="section-title" style="margin-bottom: 10px;">Let's Connect</h2>
<div class="internship-cta">Open to Data Analyst / Data Science Intern roles</div>
<div class="contact-grid">
<a href="tel:9024796126" class="glass-card contact-card" data-cursor="hover">
<div class="contact-icon"><i class="fas fa-phone-alt"></i></div>
<div class="contact-label">Phone</div>
<div class="contact-value">+91 9024796126</div>
</a>
<a href="https://www.linkedin.com/in/atharva-upadhyay-836449326" target="_blank" class="glass-card contact-card" data-cursor="hover">
<div class="contact-icon"><i class="fab fa-linkedin-in"></i></div>
<div class="contact-label">LinkedIn</div>
<div class="contact-value">Atharva Upadhyay</div>
</a>
<div class="glass-card contact-card" data-cursor="hover">
<div class="contact-icon"><i class="fas fa-map-marker-alt"></i></div>
<div class="contact-label">Location</div>
<div class="contact-value">Banswara, Rajasthan</div>
</div>
</div>
<footer class="footer-bottom">
<p>&copy; 2025 Atharva. Built for Internships.</p>
</footer>
</section>
</main>

<!-- ================= BLOG OVERLAY ================= -->
<div id="blog-overlay" aria-hidden="true" role="dialog">
<div class="container">
<div class="blog-header">
<div style="margin-bottom: 20px;">
<a href="#" onclick="closeBlog(event)" class="magnetic-btn" style="padding: 8px 20px; font-size: 0.8rem;">&larr; Back to Home</a>
</div>
<h1 class="section-title" style="font-size: 2.5rem;">My <span class="gradient-text">Blog.</span></h1>
<p style="color: var(--text-muted);">Thoughts on Data Science, AI, and Technology.</p>
</div>
<div class="blog-grid">
<article class="glass-card blog-card" data-cursor="hover">
<div class="blog-date">Jan 10, 2025</div>
<h3 class="blog-title">Understanding Pandas for Data Analysis</h3>
<p class="blog-excerpt">In the world of Data Analytics and Data Science, Pandas is one of the most powerful and widely used Python libraries...</p>
<a href="#" class="read-more" onclick="openArticle(1)">Read Article <i class="fas fa-arrow-right"></i></a>
</article>
<article class="glass-card blog-card" data-cursor="hover">
<div class="blog-date">Nov 05, 2024</div>
<h3 class="blog-title">The Future of AI in 2025</h3>
<p class="blog-excerpt">As we move towards AGI, what are the key trends every data scientist should watch out for in the coming year?...</p>
<a href="#" class="read-more" onclick="openArticle(2)">Read Article <i class="fas fa-arrow-right"></i></a>
</article>
<article class="glass-card blog-card" data-cursor="hover">
<div class="blog-date">Dec 20, 2024</div>
<h3 class="blog-title">Power BI vs Tableau</h3>
<p class="blog-excerpt">A comprehensive comparison between the two giants of business intelligence. Which one should you choose...</p>
<a href="#" class="read-more" onclick="openArticle(3)">Read Article <i class="fas fa-arrow-right"></i></a>
</article>
<article class="glass-card blog-card" data-cursor="hover">
<div class="blog-date">Oct 12, 2024</div>
<h3 class="blog-title">Machine Learning Basics</h3>
<p class="blog-excerpt">Explaining Supervised vs Unsupervised learning with simple real-world examples and Python code snippets...</p>
<a href="#" class="read-more" onclick="openArticle(4)">Read Article <i class="fas fa-arrow-right"></i></a>
</article>
</div>
<div style="text-align: center; padding: 50px 0;">
<p style="color: var(--text-muted);">Thanks for reading my insights.</p>
</div>
</div>
</div>

<!-- ================= ARTICLE READER MODAL ================= -->
<div id="article-reader-modal" aria-hidden="true" role="dialog">
<a href="#" onclick="closeArticle(event)" class="article-back-btn magnetic-btn">
<i class="fas fa-arrow-left"></i> Back to Blog
</a>
<div class="article-content-container glass-card">
<h1 id="reader-title">Article Title</h1>
<div id="reader-meta">Date | Author</div>
<div id="reader-body"></div>
</div>
</div>

<!-- ================= JAVASCRIPT ================= -->
<script>
document.addEventListener("DOMContentLoaded", () => {
// ==========================================
// 1. STATE & UTILITIES
// ==========================================
const state = { scrollLockCount: 0, isTouch: ('ontouchstart' in window) || (navigator.maxTouchPoints > 0), scrollY: 0, matrixActive: false, isAnimating: true };
const elements = {
body: document.body, cursor: document.getElementById('cursor'), cursorDot: document.getElementById('cursor-dot'),
navLinks: document.getElementById('navLinks'), menuToggle: document.querySelector('.menu-toggle'),
blogOverlay: document.getElementById('blog-overlay'), articleModal: document.getElementById('article-reader-modal'),
navAnchors: document.querySelectorAll('.nav-link[href^="#"]'), sections: document.querySelectorAll('section[id]'),
chatBody: document.getElementById('chat-body'), chatInput: document.getElementById('command-input'),
suggestions: document.getElementById('suggestions'), neuralCanvas: document.getElementById('neural-canvas'),
neuralContainer: document.getElementById('neural-canvas-container'), matrixCanvas: document.getElementById('matrix-canvas'),
matrixOverlay: document.getElementById('matrix-overlay'), tiltCard: document.getElementById('tilt-card'),
scrollProgress: document.getElementById('scroll-progress')
};

function toggleScrollLock(shouldLock) {
if (shouldLock) {
state.scrollLockCount++;
if (state.scrollLockCount === 1) {
state.scrollY = window.scrollY;
elements.body.style.overflow = 'hidden'; elements.body.style.position = 'fixed';
elements.body.style.top = `-${state.scrollY}px`; elements.body.style.width = '100%';
}
} else {
state.scrollLockCount = Math.max(0, state.scrollLockCount - 1);
if (state.scrollLockCount === 0) {
elements.body.style.overflow = ''; elements.body.style.position = ''; elements.body.style.top = ''; elements.body.style.width = '';
window.scrollTo(0, state.scrollY);
}
}
}

// ==========================================
// 2. DUAL-BRAIN: PORTFOLIO KNOWLEDGE BASE
// ==========================================
const PORTFOLIO_KNOWLEDGE_BASE = {
    name: "Atharva Upadhyay",
    role: "Data Analyst & AI/ML Student",
    education: "2nd Year BTech CSE (AI & ML), VIT Vellore",
    skills: {
        core: ["Python", "SQL", "Power BI", "Pandas", "NumPy"],
        learning: ["Tableau", "Git", "NLP", "Deep Learning"]
    },
    projects: [
        {
            keywords: ["student performance", "prediction", "academic"],
            name: "Student Performance Prediction",
            data: {
                problem: "Predicting student academic outcomes for early intervention.",
                dataset: "10,000+ student records (Kaggle).",
                model: "Logistic Regression & Random Forest.",
                result: "Improved accuracy from 71% to 85%."
            }
        },
        {
            keywords: ["sales", "dashboard", "power bi", "analytics"],
            name: "Sales Analytics Dashboard",
            data: {
                problem: "Tracking regional sales performance efficiently.",
                dataset: "Internal SQL Server data.",
                model: "N/A (Business Intelligence tool).",
                result: "Optimized query load time by 40%."
            }
        },
        {
            keywords: ["churn", "customer", "xgboost", "retention"],
            name: "Customer Churn Prediction",
            data: {
                problem: "Identifying at-risk customers to reduce attrition.",
                dataset: "Telecom customer data.",
                model: "XGBoost Classifier.",
                result: "Achieved 82% AUC-ROC Score."
            }
        }
    ]
};

// ==========================================
// 3. DUAL-BRAIN: INTELLIGENCE ENGINE
// ==========================================
const INTELLIGENCE_ENGINE = {
    
    isMute: false,
    speechRate: 1,
    isMockInterview: false,
    interviewCount: 0,
    
    // 1. INTENT DETECTION
    detectIntent: (text) => {
        text = text.toLowerCase();
        
        // Portfolio Brain Triggers
        if (text.match(/project|work|experience|portfolio|dataset|accuracy|churn|sales|student/i)) {
            return { type: 'portfolio', confidence: 0.9 };
        }
        if (text.match(/skill|stack|language|tool|python|sql|bi/i)) {
            return { type: 'portfolio', confidence: 0.8 };
        }
        if (text.match(/resume|education|vit|college|btech|year/i)) {
            return { type: 'portfolio', confidence: 0.9 };
        }
        
        // Interview Mode Triggers
        if (text.match(/mock interview|interview me|ask question|prep/i)) {
            INTELLIGENCE_ENGINE.isMockInterview = true;
            INTELLIGENCE_ENGINE.interviewCount = 0;
            return { type: 'interview', confidence: 0.95 };
        }

        // Resume Explainer Triggers
        if (text.match(/explain my resume|review cv|strengths|improve profile/i)) {
            return { type: 'resume_review', confidence: 0.9 };
        }

        // General Brain (Default)
        return { type: 'general', confidence: 0.5 };
    },

    // 2. PROMPT BUILDER (The "Dual Brain" Logic)
    buildSystemPrompt: (userText) => {
        const intent = INTELLIGENCE_ENGINE.detectIntent(userText);
        const persona = `You are ${PORTFOLIO_KNOWLEDGE_BASE.name}, a ${PORTFOLIO_KNOWLEDGE_BASE.role}.
        Tone: Professional, Friendly, Honest, Hinglish (light mix).
        Format: Always use Markdown (Headings, Bullet Points). Never reply in a single paragraph.
        `;

        // --- BRAIN 1: PORTFOLIO MODE ---
        if (intent.type === 'portfolio') {
            // Identify Project Deep-Dive
            let projectContext = "";
            PORTFOLIO_KNOWLEDGE_BASE.projects.forEach(proj => {
                if (userText.toLowerCase().includes(proj.name.toLowerCase()) || 
                    proj.keywords.some(k => userText.toLowerCase().includes(k))) {
                    projectContext = `
                    CURRENT FOCUS: ${proj.name}.
                    PROBLEM: ${proj.data.problem}
                    DATASET: ${proj.data.dataset}
                    MODEL: ${proj.data.model}
                    RESULT: ${proj.data.result}
                    `;
                }
            });

            return `${persona}
            CONTEXT: You are talking about your Portfolio.
            VERIFIED DATA:
            - Education: ${PORTFOLIO_KNOWLEDGE_BASE.education}
            - Skills: ${PORTFOLIO_KNOWLEDGE_BASE.skills.core.join(', ')}
            ${projectContext}
            
            SAFETY: If user asks about experience not listed above, say you are a student working on it. DO NOT HALLUCINATE ROLES.
            `;
        }

        // --- BRAIN 2: MOCK INTERVIEW MODE ---
        if (intent.type === 'interview') {
            return `${persona}
            MODE: Technical Interviewer.
            TASK: Ask ONE specific Data Analyst or ML interview question.
            Wait for the user's answer.
            Then provide brief, constructive feedback.
            Topics: SQL, Python Pandas, Probability, ML Algorithms.
            `;
        }

        // --- BRAIN 3: RESUME REVIEW MODE ---
        if (intent.type === 'resume_review') {
            return `${persona}
            MODE: Career Coach.
            TASK: Analyze resume of ${PORTFOLIO_KNOWLEDGE_BASE.name}.
            Highlight strengths based on ${PORTFOLIO_KNOWLEDGE_BASE.skills.core}.
            Suggest 1 improvement for a student resume.
            Be motivating but honest.
            `;
        }

        // --- BRAIN 4: GENERAL CHATGPT MODE ---
        return `${persona}
        MODE: Mentor & General Assistant.
        You can answer general questions about Data Science, AI, Career Advice, and Coding.
        Be helpful and structured.
        `;
    }
};

// ==========================================
// 4. DUAL-BRAIN: VOICE ENGINE
// ==========================================
const VOICE_ENGINE = {
    recognition: null,
    synthesis: window.speechSynthesis,
    voices: [],
    
    init: () => {
        // Text to Speech Setup
        VOICE_ENGINE.populateVoices();
        if (speechSynthesis.onvoiceschanged !== undefined) {
            speechSynthesis.onvoiceschanged = VOICE_ENGINE.populateVoices;
        }

        // Speech to Text Setup
        if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            VOICE_ENGINE.recognition = new SpeechRecognition();
            VOICE_ENGINE.recognition.continuous = false;
            VOICE_ENGINE.recognition.lang = 'en-US';
            VOICE_ENGINE.recognition.interimResults = false;

            VOICE_ENGINE.recognition.onstart = () => {
                const btn = document.getElementById('mic-btn');
                btn.classList.add('listening');
                btn.classList.remove('speaking');
            };

            VOICE_ENGINE.recognition.onend = () => {
                const btn = document.getElementById('mic-btn');
                btn.classList.remove('listening');
            };

            VOICE_ENGINE.recognition.onresult = (event) => {
                const transcript = event.results[0][0].transcript;
                elements.chatInput.value = transcript;
                // Auto-submit voice command
                window.executeCommand(transcript);
            };

            VOICE_ENGINE.recognition.onerror = (event) => {
                console.warn('Voice Error:', event.error);
                const btn = document.getElementById('mic-btn');
                btn.classList.remove('listening');
            };

            // Bind Button
            const micBtn = document.getElementById('mic-btn');
            micBtn.onclick = () => {
                if (micBtn.classList.contains('listening')) {
                    VOICE_ENGINE.recognition.stop();
                } else {
                    VOICE_ENGINE.recognition.start();
                }
            };

        } else {
            document.getElementById('mic-btn').style.display = 'none'; // Hide if not supported
        }

        // Settings UI Bindings
        document.getElementById('toggle-mute').onclick = function() {
            INTELLIGENCE_ENGINE.isMute = !INTELLIGENCE_ENGINE.isMute;
            this.innerText = INTELLIGENCE_ENGINE.isMute ? "Unmute Output" : "Mute Output";
            if(INTELLIGENCE_ENGINE.isMute) VOICE_ENGINE.synthesis.cancel();
        };

        document.getElementById('speech-rate').oninput = function() {
            INTELLIGENCE_ENGINE.speechRate = parseFloat(this.value);
        };
        
        // Settings Toggle
        document.getElementById('mic-btn').oncontextmenu = (e) => {
            e.preventDefault();
            const settings = document.getElementById('voice-settings');
            settings.style.display = settings.style.display === 'none' ? 'flex' : 'none';
        };
    },

    populateVoices: () => {
        VOICE_ENGINE.voices = VOICE_ENGINE.synthesis.getVoices();
    },

    speak: (text) => {
        if (INTELLIGENCE_ENGINE.isMute) return;
        
        // Cancel previous speech (User打断 support)
        VOICE_ENGINE.synthesis.cancel();

        // Clean text for speech (remove markdown symbols)
        const cleanText = text.replace(/[#*_`-]/g, '');

        const utterance = new SpeechSynthesisUtterance(cleanText);
        
        // Try to find a decent English voice
        const preferredVoice = VOICE_ENGINE.voices.find(v => v.lang.includes('en-US') && !v.name.includes('Google'));
        if (preferredVoice) utterance.voice = preferredVoice;
        
        utterance.rate = INTELLIGENCE_ENGINE.speechRate;
        utterance.pitch = 1;

        utterance.onstart = () => {
            const btn = document.getElementById('mic-btn');
            btn.classList.add('speaking');
        };

        utterance.onend = () => {
            const btn = document.getElementById('mic-btn');
            btn.classList.remove('speaking');
        };

        VOICE_ENGINE.synthesis.speak(utterance);
    }
};

// Initialize Voice Engine immediately
VOICE_ENGINE.init();

// ==========================================
// 5. AI FORMATTING & MEMORY
// ==========================================
const aiConfig = {
    memoryLimit: 5,
    ownerName: "Atharva",
    fallbackResponses: {
        "project": "Atharva has worked on Student Performance Prediction and Sales Dashboards. Would you like to see the code?",
        "skill": "He is proficient in Python, SQL, and Power BI. He's currently learning Tableau.",
        "contact": "You can reach him at +91 9024796126 or via LinkedIn.",
        "resume": "You can download his resume using the /resume command or the button in the nav.",
        "default": "I'm currently in offline mode, but I can help! Try asking about 'projects', 'skills', or type /help."
    }
};

function getTimeBasedGreeting() {
    const hour = new Date().getHours();
    if (hour < 12) return "Good Morning";
    if (hour < 18) return "Good Afternoon";
    return "Good Evening";
}

function sanitizeInput(str) {
    const temp = document.createElement('div');
    temp.textContent = str;
    return temp.innerHTML;
}

function formatAIResponse(rawText) {
    if (!rawText) return "";
    let safeText = rawText.replace(/<script[^>]*?>.*?<\/script>/gi, "[Script Removed]");
    const hasMarkdown = /^(#{1,6}\s|-\s|\*\s|\d+\.\s)/m.test(safeText);
    if (!hasMarkdown && safeText.length > 100) {
        const sentences = safeText.match(/[^\.!\?]+[\.!\?]+/g) || [safeText];
        if (sentences.length > 0) sentences[0] = `**${sentences[0].trim()}**`;
        safeText = sentences.join('\n\n');
    }
    try { return marked.parse(safeText); } catch (e) { return safeText.replace(/\n/g, '<br>'); }
}

function saveChatHistory() {
    if(elements.chatBody) {
        const history = [];
        elements.chatBody.querySelectorAll('.message-bubble').forEach(bubble => {
            history.push({ type: bubble.classList.contains('user') ? 'user' : 'ai', text: bubble.innerText });
        });
        if(history.length > aiConfig.memoryLimit) history.splice(0, history.length - aiConfig.memoryLimit);
        sessionStorage.setItem('atharva_chat_memory', JSON.stringify(history));
    }
}

function loadChatHistory() {
    const saved = sessionStorage.getItem('atharva_chat_memory');
    if (saved) {
        const history = JSON.parse(saved);
        history.forEach(msg => {
            const div = document.createElement('div');
            div.className = `message-bubble ${msg.type}`;
            div.setAttribute('role', 'article');
            div.setAttribute('aria-live', 'polite');
            div.innerHTML = marked.parse(msg.text); 
            elements.chatBody.appendChild(div);
        });
        elements.chatBody.scrollTop = elements.chatBody.scrollHeight;
    }
}

// ==========================================
// 6. CHAT SYSTEM LOGIC (FULLY UPGRADED)
// ==========================================
const commands = ['/help', '/about', '/skills', '/projects', '/contact', '/resume', '/blog', '/matrix', '/hack', '/coffee', '/konami'];

const initialMessages = [
    { type: 'ai', text: `${getTimeBasedGreeting()}! I'm Atharva's AI assistant.` },
    { type: 'ai', text: "I can guide you through his Data Science projects and skills." },
    { type: 'ai', text: "Ask anything, say 'Start Interview', or use commands." }
];

function addMessage(type, text, isRaw = false) {
    const div = document.createElement('div');
    div.className = `message-bubble ${type}`;
    div.setAttribute('role', 'article'); 
    div.setAttribute('aria-live', 'polite');

    if (type === 'ai') {
        if (isRaw) div.innerHTML = formatAIResponse(text);
        else div.innerHTML = marked.parse(text);
    } else {
        div.textContent = text; 
    }

    elements.chatBody.appendChild(div);
    
    requestAnimationFrame(() => {
        elements.chatBody.scrollTo({ top: elements.chatBody.scrollHeight, behavior: 'smooth' });
    });
    
    saveChatHistory();
}

function smartTypeWriter(text, callback) {
    const div = document.createElement('div');
    div.className = 'message-bubble ai';
    div.setAttribute('role', 'article');
    elements.chatBody.appendChild(div);
    
    let i = 0;
    const speed = 15; 
    
    function type() {
        if (i < text.length) {
            div.textContent += text.charAt(i);
            i++;
            elements.chatBody.scrollTop = elements.chatBody.scrollHeight;
            setTimeout(type, speed);
        } else {
            div.style.opacity = '0.5';
            setTimeout(() => {
                div.innerHTML = formatAIResponse(text);
                div.style.opacity = '1';
                div.style.transition = 'opacity 0.3s';
                if (callback) callback();
            }, 100);
        }
    }
    type();
}

async function getAIResponse(userMessage) {
    try {
        const safeMessage = sanitizeInput(userMessage);
        const controller = new AbortController();
        const timeoutId = setTimeout(() => controller.abort(), 5000); 

        // INTEGRATION: DUAL BRAIN PROMPT
        const systemPrompt = INTELLIGENCE_ENGINE.buildSystemPrompt(userMessage);

        const res = await fetch("https://portfolio-ai-eznv.onrender.com/chat", {
  method: "POST",
  headers: {
    "Content-Type": "application/json"
  },
  body: JSON.stringify({
    message: safeMessage,
    system: systemPrompt
  }),
  signal: controller.signal
});

        
        clearTimeout(timeoutId);
        
        if (!res.ok) throw new Error("Server error");
        
        const data = await res.json();
        return data.reply;
        
    } catch (error) {
        console.warn("AI Error:", error);
        return null; // Triggers fallback
    }
}

window.executeCommand = async function(cmd) {
const originalCmd = cmd;
cmd = cmd.toLowerCase().trim();

addMessage('user', originalCmd);

// Thinking State
const thinkingId = 'thinking-' + Date.now();
const thinkingDiv = document.createElement('div');
thinkingDiv.id = thinkingId;
thinkingDiv.className = 'message-bubble ai thinking';
thinkingDiv.textContent = "AI is thinking...";
elements.chatBody.appendChild(thinkingDiv);
elements.chatBody.scrollTop = elements.chatBody.scrollHeight;

const removeThinking = () => {
    const el = document.getElementById(thinkingId);
    if(el) el.remove();
};

setTimeout(async () => {
    removeThinking();
    
    if (cmd.startsWith('/')) {
        let response = "";
        let action = null;
        let isMarkdown = false;

        switch(cmd) {
            case '/help':
            response = "**Available Commands:**\n- `/about` - About Atharva\n- `/skills` - Tech Stack\n- `/projects` - Case Studies\n- `/contact` - Hire him\n- `/blog` - Read articles\n- `/coffee` - For fun"; 
            isMarkdown = true;
            break;
            case '/about':
            response = "Atharva is a **2nd year BTech CSE (AI & ML)** student at VIT Vellore.\n\nHe specializes in turning raw data into actionable intelligence using Python, SQL, and Power BI.";
            action = () => document.getElementById('about').scrollIntoView({behavior:'smooth'});
            isMarkdown = true;
            break;
            case '/skills':
            response = "**Core Skills:**\n- Python (Pandas, NumPy)\n- SQL (Advanced Joins)\n- Power BI (DAX)\n\n**Learning:**\n- Deep Learning\n- NLP";
            action = () => document.querySelector('.skills-section').scrollIntoView({behavior:'smooth'});
            isMarkdown = true;
            break;
            case '/projects':
            response = "Checking out his **Selected Work** section...";
            action = () => document.getElementById('work').scrollIntoView({behavior:'smooth'});
            break;
            case '/contact':
            response = "Opening **Contact** details...";
            action = () => document.getElementById('contact').scrollIntoView({behavior:'smooth'});
            break;
            case '/resume':
            response = "Downloading **Resume**...";
            action = () => document.getElementById('resume-btn').click();
            break;
            case '/blog':
            response = "Opening **Blog** overlay...";
            action = () => window.openBlog();
            break;
            case '/matrix':
            triggerMatrix();
            response = "Entering the Matrix... 🕶️";
            break;
            case '/coffee':
            response = "☕ **Coffee** is fuel for all this code!";
            isMarkdown = true;
            break;
            default:
            response = "Command not found. Type `/help`.";
        }

        if (isMarkdown) {
            addMessage('ai', response, true);
            if(action) setTimeout(action, 800);
        } else {
            smartTypeWriter(response, action);
        }

    } else {
        // Natural Language AI (Uses Dual Brain)
        const aiText = await getAIResponse(originalCmd);
        
        if (aiText) {
            smartTypeWriter(aiText);
            
            // INTEGRATION: VOICE OUTPUT
            setTimeout(() => {
                VOICE_ENGINE.speak(aiText);
            }, 500); 
        } else {
            const errorDiv = document.createElement('div');
            errorDiv.className = 'message-bubble ai error';
            errorDiv.innerHTML = `Server offline. <button class="retry-btn" onclick="window.executeCommand('${originalCmd}')">Retry</button>`;
            elements.chatBody.appendChild(errorDiv);
            elements.chatBody.scrollTop = elements.chatBody.scrollHeight;
        }
    }
}, 600);
};

// Input Handling
elements.chatInput.addEventListener('keydown', (e) => {
if (e.key === 'Enter') {
const val = elements.chatInput.value;
if(val) {
elements.chatInput.value = '';
elements.suggestions.style.display = 'none';
executeCommand(val);
}
}
});

// Auto Suggestion
elements.chatInput.addEventListener('input', (e) => {
const val = e.target.value.toLowerCase();
elements.suggestions.innerHTML = '';
if (!val.startsWith('/')) { elements.suggestions.style.display = 'none'; return; }
const matches = commands.filter(c => c.startsWith(val));
if (matches.length > 0) {
matches.forEach(m => {
const div = document.createElement('div');
div.className = 'suggestion-item';
div.textContent = m;
div.onclick = () => {
elements.chatInput.value = m;
elements.suggestions.style.display = 'none';
executeCommand(m);
};
elements.suggestions.appendChild(div);
});
elements.suggestions.style.display = 'block';
} else {
elements.suggestions.style.display = 'none';
}
});

// Initialize Chat
loadChatHistory();
if(elements.chatBody.children.length === 0) {
    setTimeout(() => {
        initialMessages.forEach((msg, idx) => {
            setTimeout(() => {
                if(idx === 2) smartTypeWriter(msg.text);
                else addMessage(msg.type, msg.text, true);
            }, idx * 800);
        });
    }, 500);
}

// ==========================================
// 7. NEURAL NETWORK VISUALIZATION
// ==========================================
function initNeuralNet() {
if (!elements.neuralCanvas) return;
const ctx = elements.neuralCanvas.getContext('2d');
let width, height;
function resize() {
width = elements.neuralCanvas.width = elements.neuralContainer.offsetWidth;
height = elements.neuralCanvas.height = elements.neuralContainer.offsetHeight;
}
resize();
window.addEventListener('resize', resize);
const nodes = [];
const layers = [4, 6, 6, 2];
const layerGap = width / (layers.length + 1);
layers.forEach((count, layerIdx) => {
const x = layerGap * (layerIdx + 1);
const verticalGap = height / (count + 1);
for(let i=0; i<count; i++) {
nodes.push({ x: x, y: verticalGap * (i + 1), layer: layerIdx, val: Math.random() });
}
});
const connections = [];
nodes.forEach((node, i) => {
const nextLayerNodes = nodes.filter(n => n.layer === node.layer + 1);
nextLayerNodes.forEach(target => {
connections.push({ from: node, to: target, active: Math.random() > 0.8 });
});
});
function animate() {
if(!state.isAnimating) return requestAnimationFrame(animate);
ctx.clearRect(0, 0, width, height);

connections.forEach(conn => {
ctx.beginPath(); ctx.moveTo(conn.from.x, conn.from.y); ctx.lineTo(conn.to.x, conn.to.y);
ctx.strokeStyle = `rgba(0, 255, 157, ${conn.active ? 0.2 : 0.05})`;
ctx.lineWidth = conn.active ? 1 : 0.5; ctx.stroke();
if (conn.active) {
const time = Date.now() / 1000;
const pos = (time % 1);
const px = conn.from.x + (conn.to.x - conn.from.x) * pos;
const py = conn.from.y + (conn.to.y - conn.from.y) * pos;
ctx.beginPath(); ctx.arc(px, py, 2, 0, Math.PI*2); ctx.fillStyle = '#00ff9d'; ctx.fill();
}
});
nodes.forEach(node => {
ctx.beginPath(); ctx.arc(node.x, node.y, 4, 0, Math.PI*2);
ctx.fillStyle = '#050507'; ctx.fill(); ctx.lineWidth = 2; ctx.strokeStyle = '#00ff9d'; ctx.stroke();
if(Math.random() > 0.98) node.val = 1;
ctx.shadowBlur = 10; ctx.shadowColor = `rgba(0, 255, 157, ${node.val})`; ctx.stroke(); ctx.shadowBlur = 0;
if(node.val > 0) node.val -= 0.05;
});
requestAnimationFrame(animate);
}
animate();
}

// ==========================================
// 8. MATRIX EASTER EGG
// ==========================================
function triggerMatrix() {
state.matrixActive = !state.matrixActive;
if(state.matrixActive) {
elements.matrixOverlay.classList.add('active');
const ctx = elements.matrixCanvas.getContext('2d');
elements.matrixCanvas.width = window.innerWidth; elements.matrixCanvas.height = window.innerHeight;
const chars = "0101010101XYZ"; const fontSize = 14; const columns = elements.matrixCanvas.width / fontSize;
const drops = Array(Math.floor(columns)).fill(1);
function drawMatrix() {
if(!state.isAnimating) return requestAnimationFrame(drawMatrix);
ctx.fillStyle = "rgba(0, 0, 0, 0.05)"; ctx.fillRect(0, 0, elements.matrixCanvas.width, elements.matrixCanvas.height);
ctx.fillStyle = "#0F0"; ctx.font = fontSize + "px monospace";
for (let i = 0; i < drops.length; i++) {
const text = chars[Math.floor(Math.random() * chars.length)];
ctx.fillText(text, i * fontSize, drops[i] * fontSize);
if (drops[i] * fontSize > elements.matrixCanvas.height && Math.random() > 0.975) drops[i] = 0;
drops[i]++;
}
if(state.matrixActive) requestAnimationFrame(drawMatrix);
}
drawMatrix();
} else { elements.matrixOverlay.classList.remove('active'); }
}

// ==========================================
// 9. SCROLL PROGRESS & SPY
// ==========================================
window.addEventListener('scroll', () => {
    // Progress Bar
    const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
    const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
    const scrolled = (winScroll / height) * 100;
    elements.scrollProgress.style.width = scrolled + "%";

    // Spy
    let current = "";
    elements.sections.forEach(section => {
        const sectionTop = section.offsetTop;
        if (window.scrollY >= (sectionTop - 150)) {
            current = section.getAttribute('id');
        }
    });
    
    document.querySelectorAll('.nav-link').forEach(link => {
        link.classList.remove('active');
        if (link.getAttribute('href') === `#${current}`) {
            link.classList.add('active');
        }
    });
}, { passive: true });

// ==========================================
// 10. CURSOR & INTERACTION
// ==========================================
if (!state.isTouch && window.matchMedia("(pointer: fine)").matches) {
elements.cursor.style.display = 'block'; elements.cursorDot.style.display = 'block';
document.body.classList.add('cursor-active');
let cursorX = 0, cursorY = 0; let dotX = 0, dotY = 0;
document.addEventListener('mousemove', (e) => {
cursorX = e.clientX; cursorY = e.clientY;
elements.cursorDot.style.left = `${cursorX}px`; elements.cursorDot.style.top = `${cursorY}px`;
const rect = elements.tiltCard.getBoundingClientRect();
if (e.clientY >= rect.top && e.clientY <= rect.bottom && e.clientX >= rect.left && e.clientX <= rect.right) {
const x = (e.clientX - rect.left) / rect.width - 0.5;
const y = (e.clientY - rect.top) / rect.height - 0.5;
elements.tiltCard.style.transform = `perspective(1000px) rotateY(${x * 5}deg) rotateX(${-y * 5}deg)`;
} else { elements.tiltCard.style.transform = 'perspective(1000px) rotateY(0) rotateX(0)'; }
});
function animateCursor() {
let dt = 1.0; dotX += (cursorX - dotX) * dt; dotY += (cursorY - dotY) * dt;
elements.cursor.style.left = `${dotX}px`; elements.cursor.style.top = `${dotY}px`; requestAnimationFrame(animateCursor);
}
animateCursor();
document.querySelectorAll('[data-cursor="hover"]').forEach(el => {
el.addEventListener('mouseenter', () => {
elements.cursor.classList.add('hovered');
if(el.dataset.cursor === 'terminal') elements.cursor.classList.add('cursor-terminal');
});
el.addEventListener('mouseleave', () => {
elements.cursor.classList.remove('hovered'); elements.cursor.classList.remove('cursor-terminal');
});
});
}

// ==========================================
// 11. FLOATING CODE
// ==========================================
function createFloatingCode() {
const snippets = ["import pandas", "model.fit()", "SELECT * FROM", "np.array()", "plt.plot()", "class Net:"];
const el = document.createElement('div'); el.className = 'floating-code'; el.innerText = snippets[Math.floor(Math.random() * snippets.length)];
el.style.left = Math.random() * 100 + 'vw'; el.style.top = '100vh'; el.style.opacity = 0.03; document.body.appendChild(el);
let pos = window.innerHeight;
function animateCode() {
if(!state.isAnimating) return requestAnimationFrame(animateCode);
pos -= 0.5; el.style.top = pos + 'px';
if(pos < -50) { el.remove(); } else { requestAnimationFrame(animateCode); }
}
animateCode();
}
setInterval(createFloatingCode, 2000);

// ==========================================
// 12. PERFORMANCE: VISIBILITY API
// ==========================================
document.addEventListener("visibilitychange", () => {
    if (document.hidden) {
        state.isAnimating = false; 
    } else {
        state.isAnimating = true;
    }
});

// ==========================================
// 13. ROBUST MOBILE KEYBOARD HANDLING
// ==========================================
if (window.visualViewport) {
    const chatWindow = document.querySelector('.chat-window');
    const heroSection = document.querySelector('.hero');
    
    window.visualViewport.addEventListener('resize', () => {
        const viewportHeight = window.visualViewport.height;
        const windowHeight = window.innerHeight;
        
        // Detect keyboard
        if (viewportHeight < windowHeight * 0.85) {
            if(chatWindow) {
                chatWindow.classList.add('keyboard-open');
                chatWindow.style.position = 'fixed'; 
                chatWindow.style.bottom = '0';
            }
            if(heroSection) heroSection.classList.add('keyboard-active');
        } else {
            if(chatWindow) {
                chatWindow.classList.remove('keyboard-open');
                chatWindow.style.position = 'relative';
                chatWindow.style.bottom = 'auto';
            }
            if(heroSection) heroSection.classList.remove('keyboard-active');
        }
    });
}

// ==========================================
// 14. MOBILE MENU
// ==========================================
window.toggleMenu = function() {
const isExpanded = elements.menuToggle.getAttribute('aria-expanded') === 'true';
elements.navLinks.classList.toggle('active'); elements.menuToggle.setAttribute('aria-expanded', !isExpanded); toggleScrollLock(!isExpanded);
};

// ==========================================
// 15. BLOG & ARTICLE LOGIC
// ==========================================
window.openBlog = function(e) {
if(e) e.preventDefault(); toggleScrollLock(true); elements.blogOverlay.style.display = 'block';
void elements.blogOverlay.offsetWidth; elements.blogOverlay.style.opacity = '1'; elements.blogOverlay.setAttribute('aria-hidden', 'false'); window.scrollTo(0, 0);
};
window.closeBlog = function(e) {
if(e) e.preventDefault(); elements.blogOverlay.style.opacity = '0';
setTimeout(() => { elements.blogOverlay.style.display = 'none'; elements.blogOverlay.setAttribute('aria-hidden', 'true'); toggleScrollLock(false); }, 500);
};
const articles = {
1: { title: "Understanding Pandas for Data Analysis", date: "Jan 10, 2025", content: `<p>Pandas is the backbone of data analysis in Python. It provides two primary data structures: Series and DataFrame. Understanding these is crucial for any analyst.</p><h3>Why Pandas?</h3><p>It allows for fast data manipulation, cleaning, and aggregation. Whether you are handling CSV files, Excel sheets, or SQL databases, Pandas connects them all.</p><h3>Key Operations</h3><ul><li><strong>Data Cleaning:</strong> Handling missing values with fillna() or dropna().</li><li><strong>Filtering:</strong> Using boolean indexing to slice data.</li><li><strong>Merging:</strong> Combining datasets using merge() and join().</li></ul><p>Mastering Pandas is the first step towards becoming a proficient Data Scientist.</p>` },
2: { title: "The Future of AI in 2025", date: "Nov 05, 2024", content: `<p>As we look towards 2025, Artificial Intelligence is no longer just a buzzword—it is a reality. Generative AI has transformed how we create content, code, and art.</p><h3>Trends to Watch</h3><p><strong>1. Multimodal Models:</strong> AI that can understand text, images, and audio simultaneously.</p><p><strong>2. Edge AI:</strong> Running AI models locally on devices for privacy and speed.</p><p><strong>3. AI Ethics:</strong> As models grow, so does the need for regulation and ethical guidelines.</p><p>Data scientists will need to adapt faster than ever to these changing landscapes.</p>` },
3: { title: "Power BI vs Tableau", date: "Dec 20, 2024", content: `<p>The battle of the BI giants! Both Power BI and Tableau are excellent tools, but they serve slightly different needs.</p><h3>Power BI</h3><ul><li>Best for corporate environments already using Microsoft products.</li><li>Strong DAX language for complex calculations.</li><li>More affordable part of the Office 365 suite.</li></ul><h3>Tableau</h3><ul><li>Superior for pure data visualization capabilities.</li><li>Better handling of massive datasets.</li><li>More flexible and aesthetically pleasing out-of-the-box.</li></ul><p>Choose based on your budget and ecosystem needs.</p>` },
4: { title: "Machine Learning Basics", date: "Oct 12, 2024", content: `<p>Machine Learning (ML) is a subset of AI where computers learn from data without being explicitly programmed.</p><h3>Supervised Learning</h3><p>In this type, the model learns from labeled data. Examples include Linear Regression and Decision Trees. It's like a teacher guiding a student.</p><h3>Unsupervised Learning</h3><p>Here, the model finds patterns in unlabeled data. Clustering and Dimensionality Reduction fall under this category. It's like self-study.</p><p>Starting with simple algorithms like Linear Regression is key to building a solid foundation.</p>` }
};
window.openArticle = function(id) {
const article = articles[id];
if(!article) return;
document.getElementById('reader-title').innerText = article.title;
document.getElementById('reader-meta').innerText = `${article.date} | Atharva Upadhyay`;
document.getElementById('reader-body').innerHTML = article.content;
elements.articleModal.style.display = 'block';
void elements.articleModal.offsetWidth; elements.articleModal.style.opacity = '1'; elements.articleModal.setAttribute('aria-hidden', 'false');
};
window.closeArticle = function(e) {
if(e) e.preventDefault(); elements.articleModal.style.opacity = '0';
setTimeout(() => { elements.articleModal.style.display = 'none'; elements.articleModal.setAttribute('aria-hidden', 'true'); }, 400);
};
document.addEventListener('keydown', (e) => {
if (e.key === 'Escape') {
if (state.matrixActive) triggerMatrix();
if (elements.articleModal.style.display === 'block') window.closeArticle();
else if (elements.blogOverlay.style.display === 'block') window.closeBlog();
else if (window.innerWidth <= 1024 && elements.navLinks.classList.contains('active')) window.toggleMenu();
}
});

// ==========================================
// 16. RESUME GENERATOR
// ==========================================
const resumeBtn = document.getElementById('resume-btn');
const resumeContent = `ATHARVA UPADHYAY\nData Analyst | AI/ML Student\n\nPROFILE\nBTech CSE (AI & ML) student at VIT Vellore with a strong foundation in Python, SQL, and Data Visualization.\n\nSKILLS\n- Python, SQL, Power BI, Excel\n- Pandas, NumPy, Scikit-learn\n- Machine Learning, Statistical Analysis\n\nPROJECTS\n1. Student Performance Prediction\n2. Sales Analytics Dashboard\n3. Customer Churn Prediction`;
const blob = new Blob([resumeContent], { type: "text/plain" });
resumeBtn.setAttribute("href", URL.createObjectURL(blob));
resumeBtn.setAttribute("download", "Atharva_Resume.txt");

// ==========================================
// 17. SCROLL REVEAL
// ==========================================
if ('IntersectionObserver' in window) {
const observer = new IntersectionObserver((entries) => {
entries.forEach(entry => {
if(entry.isIntersecting) {
entry.target.style.opacity = 1; entry.target.style.transform = 'translateY(0)'; observer.unobserve(entry.target);
}
});
}, { threshold: 0.1 });
const targets = document.querySelectorAll('.work-card, .contact-card, .about-card, .glass-card, .blog-card');
targets.forEach(el => {
el.style.opacity = 0; el.style.transform = 'translateY(30px)'; el.style.transition = 'all 0.8s cubic-bezier(0.2, 0.8, 0.2, 1)'; observer.observe(el);
});
}

if(window.innerWidth > 1024) initNeuralNet();
});
</script>
</body>
</html>